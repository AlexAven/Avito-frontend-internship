# Тестовое задание для стажёра Frontend-разработки в компанию Авито (Зима-2025)
## Клон Авито с базовыми возможностями работы с объявлениями
## Описание работы

### Основной стек:
- TypeScript;
- React v.19;
- Redux (Redux ToolKit) v.9.2;
- React Router v.6.29;
- Styled-Components v.6.1;

### Дополнительные библиотеки:
- axios - выполнение HTTP-запросов;
- cors - взаимодействие приложения и сервера на разных портах;
- reselect - оптимизация производительности селекторов;
- formik - создание и управление формами;
- yup - валидация форм;
- react-select - создание выпадающих меню;
- react-toastify - создание всплывающих уведомлений;
- concurrently - одновременный запуск команд в терминале;
- eslint - линтинг кода;
- prettier - улучшение внешнего вида кода.

### Архитектура проекта
- При выполнении проекта за основу был взят так называемый подход Feature-Sliced Design. Данная методология подразумевает разработку приложения через создание независимых блоков, каждый из которых реализует какой-то конкретный функционал или часть бизнес-логики приложения. Также я частично позаимствовал методологию Component-Based архитектуры и использовал отдельные компоненты для создания более крупных блоков.

- Мой проект – это приложение с динамическим рендером контента за счет использования React, переходом на страницы без перезагрузки браузера благодаря использованию SPA-роутинга с помощью React Router. 

- Все данные приложение получает через HTTP запросы на сервер и хранит полученную информацию в едином cторе, для удобства разбитом на отельные стейты (слайсы) в зависимости от их назначения. Данный подход реализован через Redux Toolkit, что позволяет приложению иметь единый источник правды, централизованно получать и обновлять данные полученные с backend и UI-состояния.

- UI моего приложения выполнен самостоятельно с использованием библиотеки Styled-components без использования сторонних UI-библиотек. Данный подход хоть и может увеличить время затрачиваемое на верстку, однако позволяет более гибко подходить к стилизации элементов. Так как в задании было указано о необходимости создать клон Авито, то я постарался  сделать элементы своего приложения похожими на элементы  оригинального сайта, хоть и в несколько упрощенном варианте. Реализована адаптивная верстка интерфейса для любых типов экранов.

- Для облегчения работы со скриптами я реализовал возможность запускать скрипты одновременно с помощью concurrently.


### Внутренняя архитектура:
- Основная часть файлов и компонентов находится в папке ./src/ расположенной в корне приложения;
- Каждая из страниц на которую мы попадаем при навигации по приложению с помощью роутинга ("/list," "/item/:id", "/form", "/несуществующие-страницы") находятся в директории /pages/;
- Основной стор и компонент App.ts находятся  в директории /app;
- Все файлы и данные необходимые для взаимодействия с сервером расположены в директории /api. Для возможного взаимодействия проекта и сервера которые запускаются на разных портах была дополнительно установлена библотека cors;
- Для избежания хардкодинга URL-адресов и имитации работы с реальным сервером я вынес адреса в отдельные переменные и поместил их в файл /api/api.ts;
- Компоненты которые используются для создания более крупных частей приложения располагаются в директории /components;
- Все фичи которые реализуют функционал сайта и его бизнес-логику, а также компоненты являющиеся уникальными для данной фичи располагаются в директории /features;
- Базовые стили, подключение шрифтов, сброс стилей по умолчанию, файл с CSS переменными располагаются в директории /styles;
- Сущности необходимые для типизации TypeScript расположены в директории /types;
- Для увеличения производительности приложения сложные селекторы возвращающие массивы были созданы через reselect, который момоизирует данные и обновляет их только если они действительно изменились.
- Практически все компоненты приложения и их отдельные элементы прокомментированы об их назначении в коде.
- Для более легкого восприятия кода js логика и хелперы вынесены в отдельные компоненты или кастомные хуки.

- Для облегчения работы со скриптами я вынес наиболее важные скрипты в отдельный Makefile, что позволяет писать их более коротко и выполнять одновременно. При запуске и работе с приложением рекомендую использовать именно их (например: `make install` – установит зависимости проекта и API сервера одновременно единой командой);

### Функционал проекта
 - Приложение при запуске переходит в директорию "/list" и осуществляет запрос на сервер для получения списка объявлений.
Пока статус запроса является "pending" пользователю будет отрисован спиннер загрузки. При удачном завершении запроса пользователю отобразятся карточки объявлений, либо уведомление об отсутствии объявлений. В случае ошибки пользователь увидит компонент ошибки с текстовым сообщением. 
 - Полученные объявления отображаются по 5 карточек на странице, для перехода на другую страницу реализована динамическая пагинация. 
- Поисковая строка ищет совпадения в объявлениях по их названию. 
- Пагинация и поисковая строка корректно взаимодействуют. 
- Есть возможность отобразить объявления по 4 категориям: Все, Авто, Недвижимость, Услуги.
- При клике на логотип сайта осуществляется сброс всех фильтров и переход на главную страницу.

- Все категории объявлений (кроме категории «Все») имеют уникальные фильтры, которые реализованы как инпуты так и выпадающее меню (выпадающее меню реализованно с использованием react-select. Yup и formik в фильтрах не используются, так как здесь более простая валидация вводимых значений). При выборе конкретного значения из выпадающего меню пользователю будут предложены варианты только из имеющихся объявлений (например, при сортировке по марке авто, можно выбрать марку только из существующих объявлений на сайте).
- Можно комбинировать фильтрацию по категориям и строку поиска по названию. 

- Создание нового объявления осуществляется с помощью кнопки расположенной в шапке сайта.
При клике на кнопку откроется форма создания объявления по адресу "/form." В это время кнопка создания нового объявления в шапке станет недоступна.
- Создание объявления состоит из двух шагов: Основной и дополнительной информации. После создания объявления основная информацию не подлежит редактированию – только дополнительная. 
Данные нового объявления вводятся в форму содержащую обязательные не обязательные строки и выпадающие меню которые позволяют ввести только валидные данные и в случае ошибки укажут на нее и не пропустят к следующему шагу (форма и валидация реализованы с помощью formik + yup + кастомные CSS стили). Если не указать URL-ссылку на фото, то отобразится заглушка. При завершении создания объявления вы будете перенаправлены на главную страницу и получите всплывающее уведомление об удачном или не удачном создании нового объявления. Созданное объявление отправится на сервер и отобразится в общем списке в реальном времени. 

- Карточки объявлений содержат краткую информацию о товаре и фотографию. В случа ее отсутствия будет показана заглушка. 
Переход к карточке объявления можно осуществить по клику на кнопку просмотра или на заголовок объявления (т.к. в задании было явно указано о необходимости реализовать кнопку на карточке объявления, переход по клику по самой карточке не был реализован - иначе теряется смысл кнопки). Переход на страницу объявления вызывает запрос на сервер для получения данных объявления по его ID.
- Отображение спиннера загрузки или ошибки получения данных реализованы аналогично, как и при получении списка. 

- Карточка объявления представляет из себя станицу расположенную по динамическому адресу "/item/[ID-объявления]". На странице представлена вся информация о товаре, фото или заглушка.
Навигация позволяет вернуться назад или перейти к редактированию карточки.
- При переходе к редактированию объявления вы перейдете на страницу "/form" для изменения данных. О том что это редактирование, а не создание нового объявления вам подскажет динамический заголовок формы. Так как первый шаг формы содержал в себе данные не подлежащие редактированию – вы автоматически попадете на второй шаг формы, где сможете ввести новые данные. Текущие данные при этом остаются предзаполненными в форме. Ввести можно только валидные данные (валидация здесь также работает). После внесения изменений и подтверждения вы будете перенаправлены на главную страницу и получите всплывающее уведомлению об удачном или не удачном редактировании объявления. Внесенные изменения будут отправлены на сервер и изменятся на сайте в реальном времени.

- При попытке перейти на не существующую страницу – вы получите соответствующее сообщение и кнопку для перехода на главную страницу.

- Реализована адаптивная верстка интерфейса для любых типов экранов.

## Проблемы в ходе работы
- Не указано ТЗ к фильтрам категорий. Их способ исполнения и примерная логика работы. Пришлось импровизировать. 

- Сложности работы с сервером. Из-за того что сервер локальный и находится на разных портах с приложением - возникли проблемы с получением/отправкой данных. Решил проблему установкой библиотеки cors и разрешением на получение данных.

- В описании задания было указано что свойство mileage (пробег) является опциональным, однако в API сервера он указан обязательным и поэтому при отправке данных на сервер ловил ошибку несоответствия данных и не мог никак ее найти. Когда обнаружил проблему - принял решение оставить свойство как обязательное.

## Установка
- Установить [NodeJS и NPM];
- Клонировать репозиторий (ветка main);
- Выполнить в терминале команду `make install` в корне проекта (команда установит зависимости проекта и сервера сразу);

(при желании можете воспользоваться обычными npm командами).

## Запуск проекта
- Команда `make dev` выполненная в корне проекта запустит проект на локальном хосте вместе с сервером;
